<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Jogo da Mem√≥ria</title>
<style>
    body{
        font-family: Arial, sans-serif;
        background: #f1f1f1;
        margin: 0;
        padding: 20px;
        text-align: center;
    }

    #board{
        width: 90%;
        margin: auto;
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        gap: 10px;
    }

    .card{
        width: 100%;
        aspect-ratio: 1;
        perspective: 800px;
        cursor: pointer;
    }

    .inner{
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        transition: transform 0.4s;
    }

    .inner.flipped{
        transform: rotateY(180deg);
    }

    .front, .back{
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 28px;
        color: white;
        font-weight: bold;
    }

    .front{
        background: #4CAF50;
    }

    .back{
        transform: rotateY(180deg);
        background: #2196F3;
    }

    .matched .inner{
        transform: rotateY(180deg);
        filter: brightness(1.2);
    }

    #panel{
        margin-bottom: 20px;
        font-size: 20px;
    }

</style>
</head>
<body>

<h1>Jogo da Mem√≥ria</h1>

<div id="panel">
    Jogadas: <span id="moves">0</span> |
    Tempo: <span id="time">00:00</span>
</div>

<div id="board"></div>

<script>
function shuffle(arr){
    for(let i=arr.length-1; i>=1; i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

const movesEl = document.getElementById("moves");
const timeEl = document.getElementById("time");
let moves = 0;
let matches = 0;

let time = 0;
let timerInterval = null;

function startTimer(){
    timerInterval = setInterval(()=>{
        time++;
        const mm = String(Math.floor(time/60)).padStart(2,"0");
        const ss = String(time%60).padStart(2,"0");
        timeEl.textContent = `${mm}:${ss}`;
    },1000);
}

function stopTimer(){
    clearInterval(timerInterval);
}

let icons = [];
for(let i=1;i<=32;i++){
    icons.push("üíé"+i);
}

let deck = [];
let uid=1;
icons.forEach((icon, idx)=>{
    deck.push({uid:uid++, pid:idx, side:0, icon, matched:false});
    deck.push({uid:uid++, pid:idx, side:1, icon, matched:false});
});

shuffle(deck);

const board = document.getElementById("board");
let first=null, second=null;
let lock=false;

function render(){
    board.innerHTML="";
    deck.forEach(card=>{
        const cardNode = document.createElement("div");
        cardNode.className = "card";

        const inner = document.createElement("div");
        inner.className = "inner";

        const front = document.createElement("div");
        front.className = "front";
        front.textContent = "?";

        const back = document.createElement("div");
        back.className = "back";
        back.textContent = card.icon;

        inner.appendChild(front);
        inner.appendChild(back);
        cardNode.appendChild(inner);

        if(card.matched) cardNode.classList.add("matched");

        cardNode.addEventListener("click",()=>onCardClick(card,inner,cardNode));

        board.appendChild(cardNode);
    });
}

function onCardClick(card, inner, node){
    if(lock || card.matched) return;
    if(!timerInterval) startTimer();

    // impedir desvirar a primeira carta
    if(!first){
        inner.classList.add('flipped');
        first = {card, inner, node};
        return;
    }

    // se clicou de novo na primeira carta ‚Üí nada acontece
    if(first.card.uid === card.uid) return;

    // vira segunda carta
    inner.classList.add('flipped');
    second = {card, inner, node};
    lock = true;
    moves++;
    movesEl.textContent = moves;

    if(first.card.pid === second.card.pid && first.card.side !== second.card.side){
        // par correto
        first.card.matched = true;
        second.card.matched = true;
        matches++;

        first.node.classList.add('matched');
        second.node.classList.add('matched');

        setTimeout(()=>{
            first=null;
            second=null;
            lock=false;

            if(matches===32){
                stopTimer();
                setTimeout(()=>alert(`Parab√©ns! Jogo conclu√≠do em ${moves} jogadas e ${timeEl.textContent}.`),200);
            }

            render();
        },500);

    } else {
        // ‚ùó Aguarda 3 segundos antes de esconder as cartas erradas
        setTimeout(()=>{
            first.inner.classList.remove('flipped');
            second.inner.classList.remove('flipped');
            first=null;
            second=null;
            lock=false;
        },3000);
    }
}

render();
</script>

</body>
</html>
